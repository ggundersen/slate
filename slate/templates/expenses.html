<!DOCTYPE HTML PUBLIC=''>
<html>

{% include 'head.html' %}

<body>
<div class='container'>
    
    {% include 'header.html' %}
    
    <h3>Expenses</h3>
    <div id='expenses-page' class='row'>
        <div class='col-md-2'>
            {% if month_str %}
                <p>{{ month_str }}</p>
            {% endif %}
            <p class='highlight'>Sum: {{ category_sum }}</p>
        </div>
        <div class='col-md-2'>
            <form action='expenses' method='get'>
                {% if year and month %}
                <input type='hidden' name='year' value='{{ year }}'> 
                <input type='hidden' name='month' value='{{ month }}'> 
                {% endif %}
                <div class='form-group'>
                    <select class='form-control' name='category'>
                        {% for category in categories %}
                        <option>{{ category }}</option>
                        {% endfor %}
                    </select>
                    <button class='btn btn-default'>View category</button>
                </div>
            </form>
        </div>
        <div class='col-md-2'>
            <ul class='list-inline'>
                <li>
                    <a class='btn btn-primary' href='/slate/expenses/all'>View all months</a>
                </li>
                <!--<li>
                    <a class='btn btn-primary' href='/slate/expenses/plot'>View yearly plot</a>
                </li>-->
            </ul>
        </div>
    </div>
    <div class='table-responsive'>
        <table class='table'>
            {% for expense in expenses %}

            <tr>
                <td>{{ expense.cost }}</td>
                <td>{{ expense.comment }}</td>
                <td>{{ expense.category }}</td>
                <td>{{ expense.datetime }}</td>
                <td>
                    <form action='expenses/edit' method='get'>
                        <input type='hidden' name='id' value='{{ expense.id }}'>
                        <input class='btn btn-info' type='submit' value='Edit'>
                    </form>
                </td>
                <td>
                    <form action='expenses/delete' method='post' onclick='return confirm("Are you sure you want to delete this item?");'>
                        <input type='hidden' name='id' value='{{ expense.id }}'>
                        <input class='btn btn-danger' type='submit' value='Delete' name='submit'>
                    </form>
                </td>
            </tr>

            {% endfor %}
        </table>
    </div>

    {% include 'footer.html' %}

</div>
</body>
</html>
